# Output {#cha:output}

```{r output-tbl, results='asis', cache=FALSE}
rds_file <- options('output_chunk_file')[[1]]
if (file.exists(rds_file)) {
    output_chunk <- readRDS(rds_file)
    chunk_label <- knitr::all_labels()
    refs <- output_chunk %>% 
        map(function(x) {
            x <- unique(x[x %in% chunk_label])
            if (length(x) == 0) {
                return(NULL)
            }
            paste0('\\@ref(fig:', x, ')') %>% 
                paste(collapse = ', ') %>% 
                paste0('Fig. ', .)
        }) 
    
    refs <- refs[!as.logical(unlist(lapply(refs, is.null)))]
    data_frame(Output = names(refs),
               Reference = as.character(refs)) %>% 
        mutate(Output = gsub('Wheat\\.', '', Output)) %>% 
        arrange(Output) %>% 
        knitr::kable(caption = 'The output variables which are used in this documentation. The prefix of `Wheat.` is removed from all variables.')
}
```

